diff --git a/utils/iscsi-swp.c b/utils/iscsi-swp.c
index badc32e..fc34281 100644
--- a/utils/iscsi-swp.c
+++ b/utils/iscsi-swp.c
@@ -162,7 +162,7 @@ int main(int argc, char *argv[])
 	iscsi_set_session_type(iscsi, ISCSI_SESSION_NORMAL);
 	iscsi_set_header_digest(iscsi, ISCSI_HEADER_DIGEST_NONE_CRC32C);
 
-	if (iscsi_url->user != NULL) {
+	if (iscsi_url->user[0]) {
 		if (iscsi_set_initiator_username_pwd(iscsi, iscsi_url->user, iscsi_url->passwd) != 0) {
 			fprintf(stderr, "Failed to set initiator username and password\n");
 			ret = 10;
